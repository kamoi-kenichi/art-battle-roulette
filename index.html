<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ART BATTLE Roulette</title>
  <style>
    :root {
      --bg: #faf8f4;
      --card: #fafafa;
      --text: #3a3a3a;
      --muted: #6b6b6b;
      --accent: #9a8c98;
      --accent2: #f5b57a;
      --border: #e9e2dc;
      --shadow: 0 10px 30px rgba(0, 0, 0, .08);
      --radius: 18px;
    }

    * {
      box-sizing: border-box
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", "Noto Sans JP", sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
    }

    header {
      padding: 28px 18px 8px;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 22px;
      letter-spacing: .04em;
    }

    header p {
      margin: 8px 0 0;
      color: var(--muted);
      font-size: 13px;
    }

    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: 18px;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }

    @media (min-width: 820px) {
      .grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 16px;
      color: var(--muted);
      font-weight: 700;
      letter-spacing: .06em;
    }

    .slot {
      border: 1px dashed var(--border);
      border-radius: 14px;
      padding: 18px 14px;
      min-height: 74px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      font-weight: 800;
      letter-spacing: .04em;
    }

    .slot.running {
      outline: 3px solid rgba(154, 140, 152, .25);
      background: linear-gradient(180deg, rgba(154, 140, 152, .08), transparent);
    }

    .btns {
      display: flex;
      gap: 10px;
      margin-top: 12px;
    }

    button {
      border: 1px solid var(--border);
      background: #fff;
      padding: 10px 12px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: transform .08s ease, box-shadow .15s ease, border-color .15s ease;
      box-shadow: 0 6px 18px rgba(0, 0, 0, .06);
      flex: 1;
    }

    button:hover {
      transform: translateY(-1px);
    }

    button:disabled {
      opacity: .45;
      cursor: not-allowed;
      transform: none;
    }

    .primary {
      border-color: rgba(154, 140, 152, .5);
      background: rgba(154, 140, 152, .10);
    }

    .danger {
      border-color: rgba(245, 181, 122, .7);
      background: rgba(245, 181, 122, .18);
    }

    .result {
      margin-top: 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 14px;
      border-radius: 16px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, .65);
    }

    .result .combo {
      font-size: 18px;
      font-weight: 900;
      letter-spacing: .03em;
    }

    .pill {
      font-size: 12px;
      color: var(--muted);
      border: 1px solid var(--border);
      padding: 6px 10px;
      border-radius: 999px;
      background: #fff;
      white-space: nowrap;
    }

    .history {
      margin-top: 16px;
    }

    .history h3 {
      margin: 0 0 10px;
      font-size: 14px;
      color: var(--muted);
      letter-spacing: .06em;
    }

    .history ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: 8px;
    }

    .history li {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 10px 12px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: center;
    }

    .history small {
      color: var(--muted);
    }

    .footerBtns {
      display: flex;
      gap: 10px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .footerBtns button {
      flex: unset;
    }

    .dogMark {
      color: var(--accent);
      display: inline-flex;
      padding: 6px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, .7);
    }

    header {
      position: relative;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
        linear-gradient(90deg, rgba(154, 140, 152, .05) 0 1px, transparent 1px 24px);
      opacity: .35;
    }

    .dogMark svg {
      transform: scale(1.4);
    }
  </style>
</head>

<body>
  <header>
    <h1 style="display:flex; align-items:center; justify-content:center; gap:10px;">
      <span class="dogMark" aria-hidden="true">

        <svg viewBox="0 0 512 512" width="22" height="22" fill="currentColor" aria-hidden="true">
          <defs>
            <style>
              .cls-1 {
                fill: #9a8c98;
              }
            </style>
          </defs>
          <path class="cls-1"
            d="M219.85,83.75c-1.34.18-2.7.29-4.07.3-4.86.02-9.39.13-14.21,1.14-10.63,2.22-20.64,7.51-26.97,16.54-.1.14-.22.27-.35.39l-22.78,20.25c-10.09,8.97-28.84,19.97-26.34,35.53,1.05,6.56,5.26,11.47,8.66,16.89,2.51,4.01,4.52,8.69,7.47,12.43l24.39,30.99c.08.1.14.2.2.3.9,1.63,9.42,16,23.41,3.94,4.53-3.9,7.18-14.06,8.92-19.4,2.16-6.6,3.57-13.41,4.11-20.33.6-7.7-.33-14.67,1.48-22.28,1.4-5.89,2.55-11.87,3.84-17.79l5.48-25.18c.1-.48.35-.9.71-1.23,1.53-1.41,6.06-5.44,10.88-8.39,2.15-1.32,4.6,1.26,3.18,3.35-5.38,7.94-12.68,22.48-11.03,41.29,0,0,1.53,39.83-6.13,61.79-7.66,21.96-22.98,28.6-22.98,28.6,0,0-10.79,4.5-22.24-2.96-1.23-.8-2.88-.28-3.45,1.07-6.12,14.52-32.66,85.18-1.5,153.13.97,2.11,4.08,1.74,4.5-.55h0c1.08-5.9,2.17-11.8,3.25-17.71,1.41-7.65,2.81-15.3,4.22-22.95,1.4-7.61,2.8-15.22,4.2-22.83,1.06-5.78,2.13-11.57,3.19-17.35.38-2.07.47-4.3,1.29-6.27.79-1.89,2.1-3.05,3.33-4.61.57-.72,1.95-1.9,2.19-2.79,0,0-16.7,62.01,10.77,116.42.92,1.83,3.56,1.73,4.33-.17.83-2.04,1.75-3.98,2.01-4.66,3.52-9.13,8.27-17.8,13.81-25.85,8.23-11.95,18.36-22.54,29.76-31.5,13.54-10.64,28.27-17.01,39.03-30.97,6.7-8.69,12.72-17.93,17.49-27.82,1.13-2.35,9.08-24.4,10.75-31.23.28-1.14,1.35-1.9,2.52-1.78l40.58,3.86s25.32,3.06,35.59-15.04c.89-1.57-.18-3.53-1.98-3.56-7.41-.15-22.13-4.65-24.48-5.38-1.81-.56-3.62-1.17-5.24-2.15-6.15-3.72-10.88-13.24-12.42-20.05-.16-.73-.28-1.48-.32-2.23-.06-1.19.85-2.21,2.04-2.38,11.88-1.64,75.93-13.27,63.65-71.53-.1-.48-.05-.97.14-1.42,1.59-3.69,8.28-21.53-9.23-25.32-.17-.04-.35-.06-.53-.06h-52.24c-.4,0-.8-.1-1.15-.3-2.35-1.3-11.59-6.69-14.26-12.47-7.28-15.77-25.9-23.84-41.95-26.69-12.09-2.14-24.52-1.95-36.68-.61-7.68.85-15.28,2.24-22.84,3.81-5.34,1.11-10.6,3.03-16.02,3.77Z" />
          <path class="cls-1"
            d="M207,449.62s-16.34-57.19,58.21-104.17c0,0,44.94-29.62,49.02-75.57-.05.55,1.34,2.16,1.61,2.63,1.39,2.41,2.64,4.89,3.79,7.41,3.7,8.13,6.33,16.79,7.51,25.65,2.44,18.35-2.66,37.11-13.53,52.02-9.71,13.32-24.33,20.75-38.38,28.59-11.29,6.3-21.37,13.66-30.66,22.67-6.46,6.26-12.52,12.92-18.65,19.5-3.1,3.32-6.15,6.68-9.17,10.07-1.64,1.84-3.26,3.69-4.88,5.54-.61.7-5.07,4.95-4.87,5.65Z" />
          <path class="cls-1"
            d="M370.18,207.58c.08.02.16.04.24.07.26.1.47.29.68.47,4.68,4.03,9.28,8.13,13.13,12.98,1.8,2.26,3.41,4.69,4.73,7.26,1.18,2.3-.61,5.05-3.19,4.83-1.9-.16-3.75-.56-5.23-1.6-1.63-1.15-2.92-3-4.36-4.39-2.76-2.66-5.57-5.26-8.38-7.85-2.52-2.33-5.68-3.11-9.01-3.72-1.69-.31-3.39-.52-5.1-.68-1.79-.16-3.57-.08-5.35-.38,1.18-.7,2.52-.92,3.8-1.34,1.67-.54,3.35-1.08,5.03-1.61,3.29-1.05,6.57-2.1,9.86-3.15.69-.22,1.34-.55,2.03-.78.36-.12.75-.2,1.12-.12Z" />
          <path class="cls-1"
            d="M378.58,130.35c.2-.25.46-.48.79-.68,2.27-1.39,5.29-.75,7.8-1.18,4.99-.85,10-1.96,15.03-2.56,4.28-.51,5.88,3.41,7.73,6.49-1.96-3.2-6.78-2.42-9.44-.62-1.05.71-2.36.97-3.41,1.81-1.33,1.06-2.35,2.44-3.07,3.97-.33.7-.67,1.46-.86,2.22-.17.66-.08,1.51-.59,2.03-.79.81-2.49.28-3.44.11-1.32-.24-2.6-.65-3.85-1.14-2-.79-3.84-2.02-5.11-3.78-1.2-1.66-3.09-4.78-1.58-6.67Z" />
        </svg>

      </span>
      ART BATTLE Roulette
    </h1>
    <p>ÂÖ∑‰Ωì √ó ÊäΩË±°„ÇíÊ≠¢„ÇÅ„Å¶„ÄÅLIMITSÁ∑¥Áøí„ÉÜ„Éº„Éû„ÇíÊ±∫„ÇÅ„Çà„ÅÜÔºÅ</p>
  </header>

  <main class="wrap">
    <section class="grid">

      <div class="card">
        <h2>ÂÖ∑‰ΩìÔºà„É¢„ÉéÔºâ</h2>
        <div class="slot" id="slotConcrete">‚Äî</div>
        <div class="btns">
          <button class="primary" id="startConcrete">START</button>
          <button class="danger" id="stopConcrete" disabled>STOP</button>
        </div>
      </div>

      <div class="card">
        <h2>ÊäΩË±°Ôºà„ÉÜ„Éº„ÉûÔºâ</h2>
        <div class="slot" id="slotAbstract">‚Äî</div>
        <div class="btns">
          <button class="primary" id="startAbstract">START</button>
          <button class="danger" id="stopAbstract" disabled>STOP</button>
        </div>
      </div>
    </section>

    <section class="card" style="margin-top:14px;">
      <h2>ÁµêÊûú</h2>
      <div class="result">
        <div>
          <div class="combo" id="combo">‚Äî</div>
          <div style="margin-top:6px;">
            <span class="pill" id="status">‰∏°ÊñπSTOP„ÅßÂ±•Ê≠¥„Å´ËøΩÂä†</span>
          </div>
        </div>
        <div class="footerBtns">
          <button id="startBoth" class="primary">‰∏°ÊñπSTART</button>
          <button id="stopBoth" class="danger" disabled>‰∏°ÊñπSTOP</button>
          <button id="reroll">„Ç∑„É£„ÉÉ„Éï„É´Á¢∫ÂÆöÔºàÂç≥Ê±∫Ôºâ</button>
        </div>
      </div>

      <div class="history">
        <h3>Â±•Ê≠¥</h3>
        <ul id="historyList"></ul>
        <div class="footerBtns">
          <button id="clearHistory">Â±•Ê≠¥„ÇíÊ∂à„Åô</button>
        </div>
      </div>
    </section>
  </main>

  <script>
    const concreteWords = [
      "„Ç´„Éã", "„Éä„Ç§„Éï", "Áä¨", "È≥•Â±Ö", "„Çç„ÅÜ„Åù„Åè", "È¢®Ëàπ", "„É™„É≥„Ç¥", "Èçµ", "ÊôÇË®à", "Èè°",
      "„Éò„ÉÉ„Éâ„Éï„Ç©„É≥", "„Çπ„Éº„ÉÑ„Ç±„Éº„Çπ", "ÂÇò", "ÊâãÁ¥ô", "ÈöéÊÆµ", "ÈõªËªä", "„Éê„É©", "‰ªÆÈù¢", "„Ç≠„É£„É≥„Éâ„É´", "ÊåáËº™"
    ];
    const abstractWords = [
      "Â¢ÉÁïå", "ÈùôÂØÇ", "ÈÅ∏Êäû", "Âñ™Â§±", "ÂÜçÁîü", "Ë°ùÂãï", "Â≠§Áã¨", "Á•à„Çä", "ÈÅïÂíåÊÑü", "‰ΩôÈüª",
      "Â∏åÊúõ", "Â´âÂ¶¨", "Ëµ¶„Åó", "ÁüõÁõæ", "ÊÜß„Çå", "ÈÅãÂëΩ", "Á∑äÂºµ", "ÂõûÊÉ≥", "ÂÆâÂøÉ", "Ëß£Êîæ"
    ];

    let timerConcrete = null;
    let timerAbstract = null;
    let currentConcrete = null;
    let currentAbstract = null;

    const elSlotConcrete = document.getElementById("slotConcrete");
    const elSlotAbstract = document.getElementById("slotAbstract");
    const elCombo = document.getElementById("combo");
    const elStatus = document.getElementById("status");

    const btnStartConcrete = document.getElementById("startConcrete");
    const btnStopConcrete = document.getElementById("stopConcrete");
    const btnStartAbstract = document.getElementById("startAbstract");
    const btnStopAbstract = document.getElementById("stopAbstract");

    const btnStartBoth = document.getElementById("startBoth");
    const btnStopBoth = document.getElementById("stopBoth");
    const btnReroll = document.getElementById("reroll");

    const historyKey = "artBattleRouletteHistory_v1";
    const elHistoryList = document.getElementById("historyList");
    const btnClearHistory = document.getElementById("clearHistory");

    function pickRandom(list) {
      return list[Math.floor(Math.random() * list.length)];
    }

    function setRunning(el, running) {
      el.classList.toggle("running", running);
    }

    function updateCombo() {
      if (currentConcrete && currentAbstract) {
        elCombo.textContent = `${currentConcrete} √ó ${currentAbstract}`;
        elStatus.textContent = "‰∏°ÊñπÁ¢∫ÂÆöÔºÅÂ±•Ê≠¥„Å´ËøΩÂä†„Åó„Åæ„Åó„Åü";
        addHistory(currentConcrete, currentAbstract);
      } else {
        elCombo.textContent = "‚Äî";
        elStatus.textContent = "‰∏°ÊñπSTOP„ÅßÂ±•Ê≠¥„Å´ËøΩÂä†";
      }
    }

    function startConcrete() {
      if (timerConcrete) return;
      setRunning(elSlotConcrete, true);
      btnStartConcrete.disabled = true;
      btnStopConcrete.disabled = false;

      currentConcrete = null;
      updateStopBothAvailability();

      timerConcrete = setInterval(() => {
        elSlotConcrete.textContent = pickRandom(concreteWords);
      }, 80);
    }

    function stopConcrete() {
      if (!timerConcrete) return;
      clearInterval(timerConcrete);
      timerConcrete = null;

      setRunning(elSlotConcrete, false);
      btnStartConcrete.disabled = false;
      btnStopConcrete.disabled = true;

      currentConcrete = elSlotConcrete.textContent;
      finalizeIfBothStopped();
      pawStamp(elSlotConcrete);
    }

    function startAbstract() {
      if (timerAbstract) return;
      setRunning(elSlotAbstract, true);
      btnStartAbstract.disabled = true;
      btnStopAbstract.disabled = false;

      currentAbstract = null;
      updateStopBothAvailability();

      timerAbstract = setInterval(() => {
        elSlotAbstract.textContent = pickRandom(abstractWords);
      }, 80);
    }

    function stopAbstract() {
      if (!timerAbstract) return;
      clearInterval(timerAbstract);
      timerAbstract = null;

      setRunning(elSlotAbstract, false);
      btnStartAbstract.disabled = false;
      btnStopAbstract.disabled = true;

      currentAbstract = elSlotAbstract.textContent;
      finalizeIfBothStopped();

      pawStamp(elSlotAbstract);
    }

    function finalizeIfBothStopped() {
      updateStopBothAvailability();

      if (currentConcrete && currentAbstract) {
        updateCombo();
      } else {
        elStatus.textContent = "„ÇÇ„ÅÜÁâáÊñπ„ÇÇSTOP„ÅßÁ¢∫ÂÆö";
      }
    }

    function updateStopBothAvailability() {
      const anyRunning = Boolean(timerConcrete || timerAbstract);
      btnStopBoth.disabled = !anyRunning;
    }

    function loadHistory() {
      try {
        return JSON.parse(localStorage.getItem(historyKey)) ?? [];
      } catch {
        return [];
      }
    }

    function saveHistory(items) {
      localStorage.setItem(historyKey, JSON.stringify(items));
    }

    function addHistory(conc, abs) {
      const now = new Date();
      const stamp = now.toLocaleString("ja-JP", { hour12: false });

      const items = loadHistory();

      if (items[0] && items[0].conc === conc && items[0].abs === abs) return;

      items.unshift({ conc, abs, stamp });

      saveHistory(items.slice(0, 50));
      renderHistory();
    }

    function renderHistory() {
      const items = loadHistory();
      elHistoryList.innerHTML = "";

      if (items.length === 0) {
        const li = document.createElement("li");
        li.innerHTML = `<span>Â±•Ê≠¥„ÅØ„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì</span><small>„Åæ„Åö„ÅØÂõû„Åó„Å¶„Åø„Çà„ÅÜ</small>`;
        elHistoryList.appendChild(li);
        return;
      }

      for (const it of items) {
        const li = document.createElement("li");
        li.innerHTML = `<strong>${it.conc} √ó ${it.abs}</strong><small>${it.stamp}</small>`;
        elHistoryList.appendChild(li);
      }
    }

    function startBoth() {
      startConcrete();
      startAbstract();
      btnStopBoth.disabled = false;
      elStatus.textContent = "ÂõûËª¢‰∏≠‚Ä¶Â•Ω„Åç„Å™„Çø„Ç§„Éü„É≥„Ç∞„ÅßSTOP";
      elCombo.textContent = "‚Äî";
    }

    function stopBoth() {
      if (timerConcrete) stopConcrete();
      if (timerAbstract) stopAbstract();
      updateStopBothAvailability();
    }

    function rerollInstant() {
      currentConcrete = pickRandom(concreteWords);
      currentAbstract = pickRandom(abstractWords);

      elSlotConcrete.textContent = currentConcrete;
      elSlotAbstract.textContent = currentAbstract;

      setRunning(elSlotConcrete, false);
      setRunning(elSlotAbstract, false);

      if (timerConcrete) { clearInterval(timerConcrete); timerConcrete = null; }
      if (timerAbstract) { clearInterval(timerAbstract); timerAbstract = null; }
      btnStartConcrete.disabled = false;
      btnStopConcrete.disabled = true;
      btnStartAbstract.disabled = false;
      btnStopAbstract.disabled = true;
      btnStopBoth.disabled = true;

      updateCombo();
    }

    btnStartConcrete.addEventListener("click", startConcrete);
    btnStopConcrete.addEventListener("click", stopConcrete);
    btnStartAbstract.addEventListener("click", startAbstract);
    btnStopAbstract.addEventListener("click", stopAbstract);

    btnStartBoth.addEventListener("click", startBoth);
    btnStopBoth.addEventListener("click", stopBoth);
    btnReroll.addEventListener("click", rerollInstant);

    btnClearHistory.addEventListener("click", () => {
      localStorage.removeItem(historyKey);
      renderHistory();
      elStatus.textContent = "Â±•Ê≠¥„ÇíÊ∂à„Åó„Åæ„Åó„Åü";
    });

    renderHistory();
    updateStopBothAvailability();

    function pawStamp(targetEl) {
      const stamp = document.createElement("div");
      stamp.textContent = "üêæ";
      stamp.style.position = "absolute";
      stamp.style.right = "14px";
      stamp.style.top = "12px";
      stamp.style.fontSize = "18px";
      stamp.style.opacity = "0";
      stamp.style.transform = "scale(.6) rotate(-12deg)";
      stamp.style.transition = "all .25s ease";
      stamp.style.filter = "grayscale(.25)";

      targetEl.style.position = "relative";
      targetEl.appendChild(stamp);

      requestAnimationFrame(() => {
        stamp.style.opacity = "0.9";
        stamp.style.transform = "scale(1) rotate(-6deg)";
      });

      setTimeout(() => stamp.remove(), 650);
    }
  </script>
</body>

</html>